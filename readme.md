# osu!Vision — концепция проекта

## Краткое описание
osu!Vision — это бесплатный сервис для отслеживания, анализа и визуализации статистики игроков osu! с возможностью управления списком отслеживаемых профилей, индивидуальной аналитикой и социальными функциями.

---

## Мотивация и цели
- Предоставить игрокам osu! удобный инструмент для отслеживания прогресса
- Дать расширенную аналитику по профилю, истории изменений и слабым местам игрока
- Обеспечить социальное взаимодействие (сравнение, друзья, достижения)
- Сделать проект полностью бесплатным и open-source

---

## Ключевые фичи (модули)
1. **Добавление и отслеживание профилей**
2. **Отображение общей статистики**
3. **История изменений (pp, ранг, уровень)**
4. **Глубокий анализ (лучшие карты, стабильность, слабые места)**
5. **Live Performance Tracking (BETA)**
6. **Уведомления и достижения**
7. **Социальные функции (друзья, сравнение, лидерборды)**
8. **Импорт/экспорт данных**
9. **Админ-панель**
10. **Идеи для будущего развития**

---

## Архитектура
- **Backend:** FastAPI (Python)
- **Frontend:** React (или Next.js) + TailwindCSS
- **База данных:** PostgreSQL (основная), Redis (кэш)
- **API:** osu! Official API v2
- **Аналитика:** Recharts/D3.js (графики)
- **Аутентификация:** OAuth2 через osu!
- **Хостинг:** Render/Vercel (бесплатные тарифы)
- **OCR для Live Tracking:** Tesseract (Python)
- **WebSocket:** FastAPI/starlette

---

## Подробное описание модулей

### 1. Система добавления профилей
- Добавление профиля по ссылке или никнейму
- Проверка валидности и существования профиля
- Хранение user_id, аватара, страны, pp, ранга
- Поддержка отслеживания нескольких профилей

### 2. Отображение общей статистики
- pp, уровень, глобальный и региональный ранг
- Количество сыгранных карт, accuracy, hit count
- Pie-чарт по режимам (osu!, mania, и т.д.)
- Активность за 7/30/90 дней

### 3. История изменений
- История изменения pp, ранга, уровня
- Линейные графики прогресса
- Сравнение с другим пользователем
- Автоматическое обновление раз в 24 часа (cron/worker)

### 4. Глубокий анализ
- Топ-100 карт и их вклад в pp
- Оценка стабильности (разброс скор)
- Рейтинг эффективности: количество карт >95% acc
- Анализ слабых мест: топ мисс-зон, карты с низким acc

### 5. Live Performance Tracking (BETA)
- Локальный сканер экрана с определением окна osu!
- Распознавание скорборда через OCR
- Отправка данных в реальном времени на backend
- WebSocket для live-отображения

### 6. Уведомления и достижения
- Push/email-уведомления при апдейте профиля
- Уведомления об изменениях ранга/pp для пользователя и его друзей
- Бейджи и достижения (например, «+100pp за неделю»)

### 7. Социальные функции
- Список друзей и их статистика
- Сравнение прогресса по графикам
- Лидерборды среди добавленных профилей
- Публичные/приватные профили

### 8. Импорт/экспорт данных
- Экспорт JSON/CSV со статистикой
- Шаринг статистики (shareable cards)
- Архив истории (zip-скачка)

### 9. Админ-панель
- Управление пользователями (баны, жалобы)
- Управление очередями обновлений
- Статистика по API, графики нагрузки

### 10. Идеи для будущего
- AI-анализ ошибок в .osr-файлах
- Браузерные расширения
- Мобильное приложение

---

## Предварительная структура БД (словами)
- **users**: id, osu_id, ник, аватар, страна, email, дата регистрации
- **profiles**: id, user_id, pp, ранг, уровень, режим, дата последнего обновления
- **history**: id, profile_id, дата, pp, ранг, уровень, accuracy, hit count
- **friends**: id, user_id, friend_id, дата добавления
- **notifications**: id, user_id, тип, текст, дата
- **achievements**: id, user_id, тип, дата
- **maps**: id, profile_id, beatmap_id, pp, acc, misses, дата
- **admin_logs**: id, действие, объект, дата, админ_id

---

## Примерная структура API (эндпоинты)
- `POST /api/profiles/add` — добавить профиль
- `GET /api/profiles/:id` — получить профиль
- `DELETE /api/profiles/:id` — удалить профиль
- `GET /api/profiles/:id/stats` — общая статистика
- `GET /api/profiles/:id/activity` — активность
- `GET /api/profiles/:id/history` — история изменений
- `GET /api/profiles/:id/history/compare?with=:otherId` — сравнение истории
- `GET /api/profiles/:id/analysis` — глубокий анализ
- `GET /api/friends` — список друзей
- `POST /api/friends/add` — добавить друга
- `GET /api/leaderboard` — лидерборд
- `GET /api/notifications` — уведомления
- `GET /api/achievements` — достижения
- `GET /api/export` — экспорт данных
- `POST /api/admin/ban` — бан пользователя

---

## Этапы разработки (roadmap)
| Этап   | Цель                                         | Примерная длительность |
| ------ | -------------------------------------------- | ---------------------- |
| Этап 1 | MVP: добавление профилей, базовая статистика | 2–3 недели             |
| Этап 2 | История изменений и графики                  | 1–2 недели             |
| Этап 3 | Расширенная аналитика и сравнение            | 1–2 недели             |
| Этап 4 | Уведомления, live-модуль (BETA)              | 2 недели               |
| Этап 5 | Социальный блок и экспорт данных             | 1–2 недели             |
| Этап 6 | Полировка UI/UX, оптимизация, тестирование   | до 2 недель            |

---

## Вопросы безопасности и лимитов
- Соблюдение лимитов osu! API (rate limit, кэширование)
- Авторизация через OAuth2 (osu!)
- Rate limiting на запросы frontend → backend
- Хранение только необходимых данных

---

## Идеи для будущего развития
- AI-анализ ошибок в .osr-файлах
- Браузерные расширения для osu! сайтов
- Мобильное приложение
- Интеграция с Discord-ботом

---

> Этот документ — основа для дальнейшей работы над проектом osu!Vision. Все детали могут уточняться и дополняться по мере разработки. 